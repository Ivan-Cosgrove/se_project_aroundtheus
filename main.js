!function(){"use strict";class e{constructor(e,t,r){let{name:o,link:n}=e;this.name=o,this.link=n,this._template=t,this._viewImage=r}_toggleLike(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button_clicked")}_removeCard(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){const e=this._cardElement.querySelector(".card__button-like"),t=this._cardElement.querySelector(".card__button-delete"),r=this._cardElement.querySelector(".card__image");e.addEventListener("click",(()=>{this._toggleLike()})),t.addEventListener("click",(()=>{this._removeCard()})),r.addEventListener("click",(()=>{this._viewImage(this)}))}createCard(){this._template=document.querySelector(this._template).content,this._cardElement=this._template.querySelector(".card").cloneNode(!0);const e=this._cardElement.querySelector(".card__title"),t=this._cardElement.querySelector(".card__image"),r=this.name,o=this.link;return e.textContent=r,t.src=o,t.alt=r,this._setEventListeners(),this._cardElement}}class t{constructor(e){let{popup:t}=e;this._popup=t}_handleEscClose=e=>{"Escape"===e.key&&this.close()};open(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("modal-box_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("modal-box_opened")}setEventListeners(){this._popup.querySelector(".modal-box__close-button").addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target.classList.contains("modal-box_opened")&&this.close()}))}}class r extends t{constructor(e,t){super({popup:e}),this._popupForm=this._popup.querySelector(".form"),this._formSubmit=t}_getInputValues(){const e=this._popup.querySelectorAll(".form__input"),t={};return e.forEach((e=>{let{name:r,value:o}=e;t[r]=o})),t}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._formSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}class o{constructor(e,t){this._config=e,this._form=t}_hideError(e){const t=this._form.querySelector(`.${e.id}-error`);t.classList.remove(this._config.error),e.classList.remove(this._config.inputError),t.textContent=""}_showError(e){const t=this._form.querySelector(`.${e.id}-error`);t.classList.add(this._config.error),e.classList.add(this._config.inputError),t.textContent=e.validationMessage}_toggleInputErrors(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmit(){const e=this._form.querySelector(this._config.submitButton);e.setAttribute("disabled",!0),e.classList.add(this._config.inactiveButton)}_enableSubmit(){const e=this._form.querySelector(this._config.submitButton);e.removeAttribute("disabled"),e.classList.remove(this._config.inactiveButton)}_checkForInvalidInput(){return[...this._form.querySelectorAll(this._config.input)].some((e=>!e.validity.valid))}toggleSubmitButton(){this._checkForInvalidInput()?this._disableSubmit():this._enableSubmit()}_setEventListeners(){[...this._form.querySelectorAll(this._config.input)].forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputErrors(e),this.toggleSubmitButton()}))}))}enableValidation(){this._setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault()}))}}document.querySelector(".cards__list");const n=document.querySelector("#edit-profile"),s=document.querySelector("#add-card"),i=(n.querySelector(".modal-box__close-button"),s.querySelector(".modal-box__close-button"));document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),n.querySelector(".form__input_type_name"),n.querySelector(".form__input_type_description"),i.closest(".form");const c=document.querySelector("#edit-profile"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__subtitle"),u=document.querySelector("#add-card"),d=document.querySelector(".cards__list"),_=document.querySelector(".profile__buttons-edit"),m=document.querySelector(".profile__buttons-add"),p=document.querySelector("#display-image"),h=p.querySelector(".modal-box__image"),f=document.querySelector(".form__input_type_name"),g=document.querySelector(".form__input_type_description"),v={editModal:"#edit-profile",addModal:"#add-card",name:".profile__title",description:".profile__subtitle",form:".form",input:".form__input",submitButton:".form__button",inactiveButton:"form__button_disabled",inputError:"form__input_invalid",error:"form__error_visible"},b=new class extends t{constructor(e,t){super({popup:e}),this._image=t}open(e){const t=this._popup.querySelector(".modal-box__image"),r=this._popup.querySelector(".modal-box__caption"),o=e.name,n=e.link;return r.textContent=o,t.src=n,t.alt=`Preview image for ${o}`,super.open(),e}}(p,h);b.setEventListeners();const y=e=>{b.open(e)},S=new class{constructor(e,t){let{items:r,renderer:o}=e;this._renderedItems=r,this._renderer=o,this.cardBin=t}renderItems(){this._renderedItems.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this.cardBin.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{S.addItem(w(e))}},d);S.renderItems();const E=new class{constructor(e){let{name:t,description:r}=e;this._name=t,this._description=r}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){this._name.textContent=e.name,this._description.textContent=e.description}}({name:a,description:l}),q=new r(u,(e=>{S.addItem(w(e))}));q.setEventListeners();const L=new r(c,(e=>{E.setUserInfo(e)}));function w(t){return new e(t,"#card",y).createCard()}L.setEventListeners(),_.addEventListener("click",(function(){L.open();const e=E.getUserInfo();f.value=e.name,g.value=e.description,k.toggleSubmitButton()})),m.addEventListener("click",(function(){q.open(),I.toggleSubmitButton()}));const k=new o(v,c);k.enableValidation();const I=new o(v,u);I.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0Msb0JBQ25CLElBQ0EsTUFBTTRDLEVBQW9CLElBQUlyRSxFQUM1QmdELEVBQ0FBLEdBRUZxQixFQUFrQjNDLG1CQUVYLE1BQU00QyxFQUFtQixJQUFJdEUsRUFDbENnRCxFQUNBQSxHQUVGc0IsRUFBaUI1QyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlsaXR5L3V0aWxpdHkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxpdHkvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCB0ZW1wbGF0ZSwgdmlld0ltYWdlKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5saW5rID0gbGluaztcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLl92aWV3SW1hZ2UgPSB2aWV3SW1hZ2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fYnV0dG9uX2NsaWNrZWRcIik7XHJcbiAgfVxyXG4gIF9yZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNhcmRMaWtlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKTtcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIlxyXG4gICAgKTtcclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICB9KTtcclxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW1vdmVDYXJkKCk7XHJcbiAgICB9KTtcclxuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl92aWV3SW1hZ2UodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpLmNvbnRlbnQ7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBjYXJkTmFtZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FyZENhcCA9IHRoaXMubmFtZTtcclxuICAgIGNvbnN0IGNhcmRJbWcgPSB0aGlzLmxpbms7XHJcbiAgICBjYXJkTmFtZS50ZXh0Q29udGVudCA9IGNhcmRDYXA7XHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gY2FyZEltZztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSBjYXJkQ2FwO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cCB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWwtYm94X29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLWJveF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94X19jbG9zZS1idXR0b25cIik7XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbC1ib3hfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIGZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgICBjb25zdCBpbnB1dHNPYmplY3QgPSB7fTtcclxuXHJcbiAgICBpbnB1dHMuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PiB7XHJcbiAgICAgIGlucHV0c09iamVjdFtuYW1lXSA9IHZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRzT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuZGF0YXsgXHJcblwiWW9zZW1pdGUgVmFsbGV5XCI6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIlxyXG59Ki9cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcblxyXG4gIF9oaWRlRXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yVGV4dCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvclRleHQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3IpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvcik7XHJcbiAgICBlcnJvclRleHQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JUZXh0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yVGV4dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvcik7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yKTtcclxuICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuICBfdG9nZ2xlSW5wdXRFcnJvcnMoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcclxuICAgIH1cclxuICB9XHJcbiAgX2Rpc2FibGVTdWJtaXQoKSB7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvbik7XHJcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZVN1Ym1pdCgpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uKTtcclxuICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tGb3JJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dCldO1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICBpZiAodGhpcy5fY2hlY2tGb3JJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0KV07XHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcnMoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGVcIik7XHJcbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmRcIik7XHJcbmNvbnN0IHByb01vZGFsQ2xvc2UgPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib3hfX2Nsb3NlLWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZE1vZGFsQ2xvc2UgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib3hfX2Nsb3NlLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IGRlc2NJbnB1dCA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IGNhcmRNb2RhbEZvcm0gPSBjYXJkTW9kYWxDbG9zZS5jbG9zZXN0KFwiLmZvcm1cIik7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VXaXRoRXNjYXBlKTtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWwtYm94X29wZW5lZFwiKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlV2l0aEVzY2FwZSk7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLWJveF9vcGVuZWRcIik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlV2l0aEVzY2FwZShldnQpIHtcclxuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgY29uc3QgYWN0aXZlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveF9vcGVuZWRcIik7XHJcbiAgICBjbG9zZU1vZGFsKGFjdGl2ZU1vZGFsKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlT25PdXRzaWRlQ2xpY2sobW9kYWwpIHtcclxuICBpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWwtYm94X29wZW5lZFwiKSkge1xyXG4gICAgY2xvc2VNb2RhbChtb2RhbCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmRcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25zLWVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbnMtYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rpc3BsYXktaW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcG9wdXBXaXRoSW1hZ2UucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib3hfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBkZXNjSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgLy8gSURzXHJcbiAgZWRpdE1vZGFsOiBcIiNlZGl0LXByb2ZpbGVcIixcclxuICBhZGRNb2RhbDogXCIjYWRkLWNhcmRcIixcclxuICAvLyBTZWxlY3RvcnNcclxuICBuYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGRlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG4gIGZvcm06IFwiLmZvcm1cIixcclxuICBpbnB1dDogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b246IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gIC8vIENsYXNzZXNcclxuICBpbmFjdGl2ZUJ1dHRvbjogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yOiBcImZvcm1fX2lucHV0X2ludmFsaWRcIixcclxuICBlcnJvcjogXCJmb3JtX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsIi8vIGNvbnNvbGUubG9nKFwiZGVidWctYnJlYWtcIik7XHJcblxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0ICogYXMgdXRpbGl0aWVzIGZyb20gXCIuLi91dGlsaXR5L3V0aWxpdHkuanNcIjtcclxuaW1wb3J0ICogYXMgY29uc3RhbnRzIGZyb20gXCIuLi91dGlsaXR5L2NvbnN0YW50cy5qc1wiO1xyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxyXG4gIGNvbnN0YW50cy5wb3B1cFdpdGhJbWFnZSxcclxuICBjb25zdGFudHMucG9wdXBJbWFnZVxyXG4pO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IG9wZW5Qb3B1cEltYWdlID0gKGRhdGEpID0+IHtcclxuICBwb3B1cEltYWdlLm9wZW4oZGF0YSk7XHJcbn07XHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoY2FyZCkgPT4ge1xyXG4gIGNhcmRSZW5kZXJlci5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZCkpO1xyXG59O1xyXG5jb25zdCBjYXJkUmVuZGVyZXIgPSBuZXcgU2VjdGlvbihcclxuICB7IGl0ZW1zOiBjb25zdGFudHMuaW5pdGlhbENhcmRzLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LFxyXG4gIGNvbnN0YW50cy5jYXJkTGlzdFxyXG4pO1xyXG5cclxuY2FyZFJlbmRlcmVyLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZTogY29uc3RhbnRzLnByb2ZpbGVOYW1lLFxyXG4gIGRlc2NyaXB0aW9uOiBjb25zdGFudHMucHJvZmlsZURlc2MsXHJcbn0pO1xyXG5jb25zdCBjYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudHMuY2FyZE1vZGFsLCAoZGF0YSkgPT4ge1xyXG4gIGNhcmRSZW5kZXJlci5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xyXG59KTtcclxuY2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudHMucHJvZmlsZU1vZGFsLCAoZGF0YSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG59KTtcclxucHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBDYXJkIENvZGVcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZCkge1xyXG4gIGNvbnN0IGluaXRDYXJkID0gbmV3IENhcmQoY2FyZCwgXCIjY2FyZFwiLCBvcGVuUG9wdXBJbWFnZSk7XHJcbiAgcmV0dXJuIGluaXRDYXJkLmNyZWF0ZUNhcmQoKTtcclxufVxyXG5cclxuLy9Nb2RhbCBCb3ggQ29kZVxyXG5cclxuY29uc3RhbnRzLmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwcm9maWxlTW9kYWwub3BlbigpO1xyXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBjb25zdGFudHMubmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZUluZm8ubmFtZTtcclxuICBjb25zdGFudHMuZGVzY0lucHV0LnZhbHVlID0gcHJvZmlsZUluZm8uZGVzY3JpcHRpb247XHJcbiAgdmFsaWRhdGVFZGl0TW9kYWwudG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3RhbnRzLmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGNhcmRNb2RhbC5vcGVuKCk7XHJcbiAgdmFsaWRhdGVBZGRNb2RhbC50b2dnbGVTdWJtaXRCdXR0b24oKTtcclxufSk7XHJcbmNvbnN0IHZhbGlkYXRlRWRpdE1vZGFsID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLmNvbmZpZyxcclxuICBjb25zdGFudHMucHJvZmlsZU1vZGFsXHJcbik7XHJcbnZhbGlkYXRlRWRpdE1vZGFsLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUFkZE1vZGFsID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLmNvbmZpZyxcclxuICBjb25zdGFudHMuY2FyZE1vZGFsXHJcbik7XHJcbnZhbGlkYXRlQWRkTW9kYWwuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIGltYWdlKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBpbWFnZTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgY29uc3QgbW9kYWxJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94X19pbWFnZVwiKTtcclxuICAgIGNvbnN0IG1vZGFsSW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94X19jYXB0aW9uXCIpO1xyXG4gICAgY29uc3QgY2FyZENhcCA9IGRhdGEubmFtZTtcclxuICAgIGNvbnN0IGNhcmRJbWcgPSBkYXRhLmxpbms7XHJcbiAgICBtb2RhbEltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkQ2FwO1xyXG4gICAgbW9kYWxJbWFnZS5zcmMgPSBjYXJkSW1nO1xyXG4gICAgbW9kYWxJbWFnZS5hbHQgPSBgUHJldmlldyBpbWFnZSBmb3IgJHtjYXJkQ2FwfWA7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZEJpbikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuY2FyZEJpbiA9IGNhcmRCaW47XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5jYXJkQmluLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lOyAvKiAoZm9ybWVybHkgbmFtZUlucHV0LnZhbHVlKSAqL1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPVxyXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uOyAvKiAoZm9ybWVybHkgZGVzY0lucHV0LnZhbHVlKSAqL1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsInRlbXBsYXRlIiwidmlld0ltYWdlIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX3RlbXBsYXRlIiwiX3ZpZXdJbWFnZSIsIl90b2dnbGVMaWtlIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9yZW1vdmVDYXJkIiwicmVtb3ZlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZExpa2UiLCJkZWxldGVCdXR0b24iLCJjYXJkSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiY3JlYXRlQ2FyZCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lIiwiY2FyZENhcCIsImNhcmRJbWciLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJldnQiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRzT2JqZWN0IiwiZm9yRWFjaCIsInZhbHVlIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2hpZGVFcnJvciIsImlucHV0IiwiZXJyb3JUZXh0IiwiaWQiLCJlcnJvciIsImlucHV0RXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfdG9nZ2xlSW5wdXRFcnJvcnMiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVTdWJtaXQiLCJidXR0b24iLCJzdWJtaXRCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJpbmFjdGl2ZUJ1dHRvbiIsIl9lbmFibGVTdWJtaXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfY2hlY2tGb3JJbnZhbGlkSW5wdXQiLCJzb21lIiwidG9nZ2xlU3VibWl0QnV0dG9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByb2ZpbGVNb2RhbCIsImNhcmRNb2RhbCIsImNhcmRNb2RhbENsb3NlIiwiY2xvc2VzdCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2MiLCJjYXJkTGlzdCIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJwb3B1cFdpdGhJbWFnZSIsInBvcHVwSW1hZ2UiLCJuYW1lSW5wdXQiLCJkZXNjSW5wdXQiLCJlZGl0TW9kYWwiLCJhZGRNb2RhbCIsImRlc2NyaXB0aW9uIiwiaW1hZ2UiLCJfaW1hZ2UiLCJkYXRhIiwibW9kYWxJbWFnZSIsIm1vZGFsSW1hZ2VUaXRsZSIsImNvbnN0YW50cyIsIm9wZW5Qb3B1cEltYWdlIiwiY2FyZFJlbmRlcmVyIiwiY2FyZEJpbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkIiwidXNlckluZm8iLCJfbmFtZSIsIl9kZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwcm9maWxlSW5mbyIsInZhbGlkYXRlRWRpdE1vZGFsIiwidmFsaWRhdGVBZGRNb2RhbCJdLCJzb3VyY2VSb290IjoiIn0=