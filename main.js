!function(){"use strict";class e{constructor(e,t,r,s,o){let{name:i,link:n,_id:a,isLiked:c}=e;this.name=i,this.link=n,this._id=a,this.isLiked=c,this._template=t,this._viewImage=r,this._handleDelete=s,this._sendLike=o}_toggleLike(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button_clicked")}_removeCard(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){const e=this._cardElement.querySelector(".card__button-like"),t=this._cardElement.querySelector(".card__button-delete"),r=this._cardElement.querySelector(".card__image");e.addEventListener("click",(()=>{this._toggleLike(),this._sendLike(this)})),t.addEventListener("click",(()=>(this._handleDelete(this),this._cardElement))),r.addEventListener("click",(()=>{this._viewImage(this)}))}createCard(){this._template=document.querySelector(this._template).content,this._cardElement=this._template.querySelector(".card").cloneNode(!0);const e=this._cardElement.querySelector(".card__title"),t=this._cardElement.querySelector(".card__image"),r=this.name,s=this.link,o=this._id;return e.textContent=r,t.src=s,t.alt=r,this._cardElement.id=o,this._cardElement.isLiked=this.isLiked,this._cardElement.isLiked?this._cardElement.querySelector(".card__button-like").classList.add("card__button_clicked"):this._cardElement.querySelector(".card__button-like").classList.remove("card__button_clicked"),this._setEventListeners(),this._cardElement}}class t{constructor(e){let{popup:t}=e;this._popup=t}_handleEscClose=e=>{"Escape"===e.key&&this.close()};open(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("modal-box_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("modal-box_opened")}setEventListeners(){this._popup.querySelector(".modal-box__close-button").addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target.classList.contains("modal-box_opened")&&this.close()}))}}class r extends t{constructor(e,t){super({popup:e}),this._popupForm=this._popup.querySelector(".form"),this._formSubmit=t,this.submitButton=this._popupForm.querySelector(".form__button")}_getInputValues(){const e=this._popup.querySelectorAll(".form__input"),t={};return e.forEach((e=>{let{name:r,value:s}=e;t[r]=s})),t}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.submitButton.textContent="Saving...",this._formSubmit(this._getInputValues())})),super.setEventListeners()}}class s{constructor(e,t){this._config=e,this._form=t}_hideError(e){const t=this._form.querySelector(`.${e.id}-error`);t.classList.remove(this._config.error),e.classList.remove(this._config.inputError),t.textContent=""}_showError(e){const t=this._form.querySelector(`.${e.id}-error`);t.classList.add(this._config.error),e.classList.add(this._config.inputError),t.textContent=e.validationMessage}_toggleInputErrors(e){e.validity.valid?this._hideError(e):this._showError(e)}_disableSubmit(){const e=this._form.querySelector(this._config.submitButton);e.setAttribute("disabled",!0),e.classList.add(this._config.inactiveButton)}_enableSubmit(){const e=this._form.querySelector(this._config.submitButton);e.removeAttribute("disabled"),e.classList.remove(this._config.inactiveButton)}_checkForInvalidInput(){return[...this._form.querySelectorAll(this._config.input)].some((e=>!e.validity.valid))}toggleSubmitButton(){this._checkForInvalidInput()?this._disableSubmit():this._enableSubmit()}_setEventListeners(){[...this._form.querySelectorAll(this._config.input)].forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputErrors(e),this.toggleSubmitButton()}))}))}enableValidation(){this._setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault()}))}}class o{constructor(e,t){let{items:r,renderer:s}=e;this._renderedItems=r,this._renderer=s,this.cardBin=t}renderItems(){this._renderedItems.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this.cardBin.prepend(e)}}document.querySelector(".cards__list");const i=document.querySelector("#edit-profile"),n=document.querySelector("#add-card"),a=(i.querySelector(".modal-box__close-button"),n.querySelector(".modal-box__close-button"));document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),i.querySelector(".form__input_type_name"),i.querySelector(".form__input_type_description"),a.closest(".form");const c=document.querySelector("#edit-profile"),d=document.querySelector(".profile__title"),l=document.querySelector(".profile__subtitle"),u=document.querySelector("#add-card"),_=document.querySelector(".cards__list"),h=document.querySelector(".profile__buttons-edit"),m=document.querySelector(".profile__buttons-add"),p=document.querySelector("#display-image"),b=p.querySelector(".modal-box__image"),f=document.querySelector(".form__input_type_name"),y=document.querySelector(".form__input_type_description"),S=document.querySelector(".profile__image"),E=document.querySelector("#change-avatar"),v=document.querySelector(".profile__buttons-image-edit"),g=document.querySelector("#delete-modal"),L=(document.querySelector("#delete-name"),document.querySelector("#delete-link"),document.querySelector("#delete-id")),k={editModal:"#edit-profile",addModal:"#add-card",changeAvatar:"#change-avatar",name:".profile__title",description:".profile__subtitle",form:".form",input:".form__input",submitButton:".form__button",inactiveButton:"form__button_disabled",inputError:"form__input_invalid",error:"form__error_visible",baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"eb144407-9d56-4c39-8eac-7fa32452a67f","content-type":"application/JSON"}},q=new class{constructor(e){this._options=e}getInitialCards(){return fetch(`${this._options.baseUrl}/cards`,{headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserInfo(){return fetch(`${this._options.baseUrl}/users/me`,{headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}submitUserInfo(e){fetch(`${this._options.baseUrl}/users/me`,{headers:this._options.headers,method:"POST",body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}updateUserInfo(e){fetch(`${this._options.baseUrl}/users/me`,{method:"PATCH",headers:this._options.headers,body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}updateProfilePicture(e){return fetch(`${this._options.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._options.headers,body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}sendCard(e){return fetch(`${this._options.baseUrl}/cards`,{method:"POST",headers:this._options.headers,body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e,t){return fetch(`${this._options.baseUrl}/cards/${e}`,{method:"DELETE",headers:this._options.headers,body:JSON.stringify(t)}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}likeCard(e,t){return fetch(`${this._options.baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._options.headers,body:JSON.stringify(t)})}removeLike(e,t){return fetch(`${this._options.baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._options.headers,body:JSON.stringify(t)})}}({baseUrl:k.baseUrl,headers:k.headers});let C,I;q.getUserInfo().then((e=>{P.setUserInfo(e),S.src=e.avatar})),q.getInitialCards().then((e=>{C=new o({items:e,renderer:e=>{C.addItem(A(e))}},_),C.renderItems()}));const x=new class extends t{constructor(e,t){super({popup:e}),this._image=t}open(e){const t=this._popup.querySelector(".modal-box__image"),r=this._popup.querySelector(".modal-box__caption"),s=e.name,o=e.link;return r.textContent=s,t.src=o,t.alt=`Preview image for ${s}`,super.open(),e}}(p,b);x.setEventListeners();const $=e=>{x.open(e)},U=new r(g,(e=>{q.deleteCard(e._id,e).then((()=>{U.submitButton.textContent="Delete Card",I=document.querySelectorAll(".card"),I.forEach((t=>{t.id===e._id&&t.remove()})),U.close()})).catch((e=>{alert(`Request to server failed. ${e}`)}))}));U.setEventListeners();const w=e=>{U.open(),L.value=e._id};function B(e){e.isLiked?q.removeLike(e._id,e).then(e.isLiked=!1).then(alert(`Like for "${e.name}" removed`)):q.likeCard(e._id,e).then(e.isLiked=!0).then(alert(`Like for "${e.name}" added`))}const P=new class{constructor(e){let{name:t,about:r}=e;this._name=t,this._about=r}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e){this._name.textContent=e.name,this._about.textContent=e.about}}({name:d,about:l}),j=new r(u,(e=>{q.sendCard(e).then((e=>{C.addItem(A(e)),j.submitButton.textContent="Create",j.close()}))}));j.setEventListeners();const O=new r(E,(e=>{q.updateProfilePicture(e).then((e=>{S.src=e.avatar,O.close(),O.submitButton.textContent="Change Picture"}))}));function A(t){return new e(t,"#card",$,w,B).createCard()}O.setEventListeners();const N=new r(c,(e=>{q.updateUserInfo(e),d.textContent=e.name,l.textContent=e.about,N.close()}));N.setEventListeners(),h.addEventListener("click",(function(){N.open();const e=P.getUserInfo();f.value=e.name,y.value=e.about,D.toggleSubmitButton()}));const J=new s(k,E);J.enableValidation(),v.addEventListener("click",(()=>{O.open(),J.toggleSubmitButton()})),m.addEventListener("click",(function(){j.open(),T.toggleSubmitButton()}));const D=new s(k,c);D.enableValidation();const T=new s(k,u);T.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SW9CLHFCQUFxQk4sR0FBTVQsTUFBTXdCLElBQ25DSCxFQUFBQSxJQUF1QkcsRUFBT3hDLE9BRTlCc0QsRUFBWTVILFFBQ1o0SCxFQUFZakgsYUFBYXRCLFlBQWMsZ0JBQWdCLEdBQ3ZELElBTUosU0FBU1IsRUFBVzJILEdBUWxCLE9BUGlCLElBQUl2SixFQUNuQnVKLEVBQ0EsUUFDQWEsRUFDQUcsRUFDQWpLLEdBRWNzQixZQUNsQixDQWJBK0ksRUFBWXpILG9CQWdCWixNQUFNc0QsRUFBZSxJQUFJbkQsRUFBY3FHLEdBQXlCWixJQUM5RGQsRUFBSW1CLGVBQWVMLEdBQ25CWSxFQUFBQSxZQUFvQ1osRUFBS3ZJLEtBQ3pDbUosRUFBQUEsWUFBb0NaLEVBQUswQixNQUN6Q2hFLEVBQWF6RCxPQUFPLElBRXRCeUQsRUFBYXRELG9CQUNid0csRUFBQUEsaUJBQXNDLFNBQVMsV0FDN0NsRCxFQUFheEQsT0FDYixNQUFNNEgsRUFBY2QsRUFBU2xCLGNBQzdCYyxFQUFBQSxNQUE0QmtCLEVBQVlySyxLQUN4Q21KLEVBQUFBLE1BQTRCa0IsRUFBWUosTUFDeENLLEVBQWtCbkYsb0JBQ3BCLElBRUEsTUFBTW9GLEVBQXNCLElBQUkzRyxFQUM5QnVGLEVBQ0FBLEdBRUZvQixFQUFvQm5GLG1CQUVwQitELEVBQUFBLGlCQUE4QyxTQUFTLEtBQ3JEaUIsRUFBWTNILE9BQ1o4SCxFQUFvQnBGLG9CQUFvQixJQUcxQ2dFLEVBQUFBLGlCQUFxQyxTQUFTLFdBQzVDakQsRUFBVXpELE9BQ1YrSCxFQUFpQnJGLG9CQUNuQixJQUNBLE1BQU1tRixFQUFvQixJQUFJMUcsRUFDNUJ1RixFQUNBQSxHQUVGbUIsRUFBa0JsRixtQkFFbEIsTUFBTW9GLEVBQW1CLElBQUk1RyxFQUMzQnVGLEVBQ0FBLEdBRUZxQixFQUFpQnBGLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbGl0eS91dGlsaXR5LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlsaXR5L2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcclxuICAgIHRlbXBsYXRlLFxyXG4gICAgdmlld0ltYWdlLFxyXG4gICAgaGFuZGxlRGVsZXRlLFxyXG4gICAgc2VuZExpa2VcclxuICApIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgIHRoaXMuX3ZpZXdJbWFnZSA9IHZpZXdJbWFnZTtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZTtcclxuICAgIHRoaXMuX3NlbmRMaWtlID0gc2VuZExpa2U7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fYnV0dG9uX2NsaWNrZWRcIik7XHJcbiAgfVxyXG4gIF9yZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNhcmRMaWtlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKTtcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIlxyXG4gICAgKTtcclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICAgIHRoaXMuX3NlbmRMaWtlKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKHRoaXMpO1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgICB9KTtcclxuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl92aWV3SW1hZ2UodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpLmNvbnRlbnQ7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBjYXJkTmFtZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FyZENhcCA9IHRoaXMubmFtZTtcclxuICAgIGNvbnN0IGNhcmRJbWcgPSB0aGlzLmxpbms7XHJcbiAgICBjb25zdCBjYXJkSUQgPSB0aGlzLl9pZDtcclxuICAgIGNhcmROYW1lLnRleHRDb250ZW50ID0gY2FyZENhcDtcclxuICAgIGNhcmRJbWFnZS5zcmMgPSBjYXJkSW1nO1xyXG4gICAgY2FyZEltYWdlLmFsdCA9IGNhcmRDYXA7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5pZCA9IGNhcmRJRDtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LmlzTGlrZWQgPSB0aGlzLmlzTGlrZWQ7XHJcbiAgICBpZiAodGhpcy5fY2FyZEVsZW1lbnQuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19idXR0b25fY2xpY2tlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2J1dHRvbl9jbGlja2VkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cCB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWwtYm94X29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLWJveF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94X19jbG9zZS1idXR0b25cIik7XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbC1ib3hfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIGZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIGNvbnN0IGlucHV0c09iamVjdCA9IHt9O1xyXG5cclxuICAgIGlucHV0cy5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+IHtcclxuICAgICAgaW5wdXRzT2JqZWN0W25hbWVdID0gdmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dHNPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICB0aGlzLl9mb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuLypcclxuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5kYXRheyBcclxuXCJZb3NlbWl0ZSBWYWxsZXlcIjogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiXHJcbn0qL1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JUZXh0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yVGV4dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvcik7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yKTtcclxuICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfc2hvd0Vycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvclRleHQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JUZXh0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3IpO1xyXG4gICAgZXJyb3JUZXh0LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgfVxyXG4gIF90b2dnbGVJbnB1dEVycm9ycyhpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfZGlzYWJsZVN1Ym1pdCgpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uKTtcclxuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0KCkge1xyXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b24pO1xyXG4gICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0ZvckludmFsaWRJbnB1dCgpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0KV07XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9jaGVja0ZvckludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXQpXTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0RXJyb3JzKGlucHV0KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjYXJkQmluKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5jYXJkQmluID0gY2FyZEJpbjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLmNhcmRCaW4ucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZVwiKTtcclxuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZFwiKTtcclxuY29uc3QgcHJvTW9kYWxDbG9zZSA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkTW9kYWxDbG9zZSA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgZGVzY0lucHV0ID0gcHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgY2FyZE1vZGFsRm9ybSA9IGNhcmRNb2RhbENsb3NlLmNsb3Nlc3QoXCIuZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZVdpdGhFc2NhcGUpO1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbC1ib3hfb3BlbmVkXCIpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VXaXRoRXNjYXBlKTtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtYm94X29wZW5lZFwiKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VXaXRoRXNjYXBlKGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBhY3RpdmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94X29wZW5lZFwiKTtcclxuICAgIGNsb3NlTW9kYWwoYWN0aXZlTW9kYWwpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VPbk91dHNpZGVDbGljayhtb2RhbCkge1xyXG4gIGlmIChtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbC1ib3hfb3BlbmVkXCIpKSB7XHJcbiAgICBjbG9zZU1vZGFsKG1vZGFsKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbnMtZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9ucy1hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGlzcGxheS1pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBwb3B1cFdpdGhJbWFnZS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveF9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgY2hhbmdlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjaGFuZ2UtYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgY2hhbmdlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19idXR0b25zLWltYWdlLWVkaXRcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWxpbmtcIik7XHJcbmV4cG9ydCBjb25zdCBkZWxldGVJRCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWlkXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIC8vIElEc1xyXG4gIGVkaXRNb2RhbDogXCIjZWRpdC1wcm9maWxlXCIsXHJcbiAgYWRkTW9kYWw6IFwiI2FkZC1jYXJkXCIsXHJcbiAgY2hhbmdlQXZhdGFyOiBcIiNjaGFuZ2UtYXZhdGFyXCIsXHJcbiAgLy8gU2VsZWN0b3JzXHJcbiAgbmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBkZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxuICBmb3JtOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXQ6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uOiBcIi5mb3JtX19idXR0b25cIixcclxuICAvLyBDbGFzc2VzXHJcbiAgaW5hY3RpdmVCdXR0b246IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvcjogXCJmb3JtX19pbnB1dF9pbnZhbGlkXCIsXHJcbiAgZXJyb3I6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxyXG4gIC8vIEFQSSBPcHRpb25zXHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZWIxNDQ0MDctOWQ1Ni00YzM5LThlYWMtN2ZhMzI0NTJhNjdmXCIsXHJcbiAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL0pTT05cIixcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRPYmplY3QgPSB7XHJcbiAgbmFtZTogXCJcIixcclxuICBsaW5rOiBcIlwiLFxyXG4gIGlzTGlrZWQ6IGZhbHNlLFxyXG4gIF9pZDogXCJcIixcclxufTtcclxuIiwiLy8gY29uc29sZS5sb2coXCJkZWJ1Zy1icmVha1wiKTtcclxuXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgKiBhcyB1dGlsaXRpZXMgZnJvbSBcIi4uL3V0aWxpdHkvdXRpbGl0eS5qc1wiO1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxpdHkvY29uc3RhbnRzLmpzXCI7XHJcbmNvbnN0IGFwaSA9IG5ldyBBUEkoe1xyXG4gIGJhc2VVcmw6IGNvbnN0YW50cy5jb25maWcuYmFzZVVybCxcclxuICBoZWFkZXJzOiBjb25zdGFudHMuY29uZmlnLmhlYWRlcnMsXHJcbn0pO1xyXG5sZXQgY2FyZFJlbmRlcmVyO1xyXG5sZXQgY2FyZEFycmF5O1xyXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXN1bHQpID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpO1xyXG4gIGNvbnN0YW50cy5hdmF0YXIuc3JjID0gcmVzdWx0LmF2YXRhcjtcclxufSk7XHJcbmNvbnN0IGxvYWRDYXJkcyA9ICgpID0+IHtcclxuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICBjb25zdCByZW5kZXJDYXJkID0gKGNhcmQpID0+IHtcclxuICAgICAgY2FyZFJlbmRlcmVyLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkKSk7XHJcbiAgICB9O1xyXG4gICAgY2FyZFJlbmRlcmVyID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHsgaXRlbXM6IHJlc3VsdCwgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSxcclxuICAgICAgY29uc3RhbnRzLmNhcmRMaXN0XHJcbiAgICApO1xyXG4gICAgY2FyZFJlbmRlcmVyLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5sb2FkQ2FyZHMoKTtcclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcclxuICBjb25zdGFudHMucG9wdXBXaXRoSW1hZ2UsXHJcbiAgY29uc3RhbnRzLnBvcHVwSW1hZ2VcclxuKTtcclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBvcGVuUG9wdXBJbWFnZSA9IChkYXRhKSA9PiB7XHJcbiAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xyXG59O1xyXG5cclxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudHMuZGVsZXRlUG9wdXAsIChkYXRhKSA9PiB7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChkYXRhLl9pZCwgZGF0YSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZGVsZXRlUG9wdXAuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGUgQ2FyZFwiO1xyXG4gICAgICBjYXJkQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmRcIik7XHJcbiAgICAgIGNhcmRBcnJheS5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhcmQuaWQgPT09IGRhdGEuX2lkKSB7XHJcbiAgICAgICAgICBjYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBhbGVydChgUmVxdWVzdCB0byBzZXJ2ZXIgZmFpbGVkLiAke2Vycm9yfWApO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3Qgb3BlbkRlbGV0ZVBvcHVwID0gKGRhdGEpID0+IHtcclxuICBkZWxldGVQb3B1cC5vcGVuKCk7XHJcbiAgY29uc3RhbnRzLmRlbGV0ZUlELnZhbHVlID0gZGF0YS5faWQ7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzZW5kTGlrZShkYXRhKSB7XHJcbiAgaWYgKGRhdGEuaXNMaWtlZCkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVMaWtlKGRhdGEuX2lkLCBkYXRhKVxyXG4gICAgICAudGhlbigoZGF0YS5pc0xpa2VkID0gZmFsc2UpKVxyXG4gICAgICAudGhlbihhbGVydChgTGlrZSBmb3IgXCIke2RhdGEubmFtZX1cIiByZW1vdmVkYCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmxpa2VDYXJkKGRhdGEuX2lkLCBkYXRhKVxyXG4gICAgICAudGhlbigoZGF0YS5pc0xpa2VkID0gdHJ1ZSkpXHJcbiAgICAgIC50aGVuKGFsZXJ0KGBMaWtlIGZvciBcIiR7ZGF0YS5uYW1lfVwiIGFkZGVkYCkpO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IGNvbnN0YW50cy5wcm9maWxlTmFtZSxcclxuICBhYm91dDogY29uc3RhbnRzLnByb2ZpbGVEZXNjLFxyXG59KTtcclxuY29uc3QgY2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uc3RhbnRzLmNhcmRNb2RhbCwgKGRhdGEpID0+IHtcclxuICBhcGlcclxuICAgIC5zZW5kQ2FyZChkYXRhKVxyXG5cclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY2FyZFJlbmRlcmVyLmFkZEl0ZW0oY3JlYXRlQ2FyZChyZXN1bHQpKTtcclxuICAgICAgY2FyZE1vZGFsLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYXRlXCI7XHJcbiAgICAgIGNhcmRNb2RhbC5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IGF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oY29uc3RhbnRzLmNoYW5nZUF2YXRhciwgKGRhdGEpID0+IHtcclxuICBhcGkudXBkYXRlUHJvZmlsZVBpY3R1cmUoZGF0YSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICBjb25zdGFudHMuYXZhdGFyLnNyYyA9IHJlc3VsdC5hdmF0YXI7XHJcblxyXG4gICAgYXZhdGFyTW9kYWwuY2xvc2UoKTtcclxuICAgIGF2YXRhck1vZGFsLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ2hhbmdlIFBpY3R1cmVcIjtcclxuICB9KTtcclxufSk7XHJcbmF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBDYXJkIENvZGVcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZCkge1xyXG4gIGNvbnN0IGluaXRDYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkLFxyXG4gICAgXCIjY2FyZFwiLFxyXG4gICAgb3BlblBvcHVwSW1hZ2UsXHJcbiAgICBvcGVuRGVsZXRlUG9wdXAsXHJcbiAgICBzZW5kTGlrZVxyXG4gICk7XHJcbiAgcmV0dXJuIGluaXRDYXJkLmNyZWF0ZUNhcmQoKTtcclxufVxyXG5cclxuLy9Nb2RhbCBCb3ggQ29kZVxyXG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudHMucHJvZmlsZU1vZGFsLCAoZGF0YSkgPT4ge1xyXG4gIGFwaS51cGRhdGVVc2VySW5mbyhkYXRhKTtcclxuICBjb25zdGFudHMucHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgY29uc3RhbnRzLnByb2ZpbGVEZXNjLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICBwcm9maWxlTW9kYWwuY2xvc2UoKTtcclxufSk7XHJcbnByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdGFudHMuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHByb2ZpbGVNb2RhbC5vcGVuKCk7XHJcbiAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGNvbnN0YW50cy5uYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5uYW1lO1xyXG4gIGNvbnN0YW50cy5kZXNjSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5hYm91dDtcclxuICB2YWxpZGF0ZUVkaXRNb2RhbC50b2dnbGVTdWJtaXRCdXR0b24oKTtcclxufSk7XHJcblxyXG5jb25zdCB2YWxpZGF0ZUF2YXRhck1vZGFsID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLmNvbmZpZyxcclxuICBjb25zdGFudHMuY2hhbmdlQXZhdGFyXHJcbik7XHJcbnZhbGlkYXRlQXZhdGFyTW9kYWwuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3RhbnRzLmNoYW5nZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhck1vZGFsLm9wZW4oKTtcclxuICB2YWxpZGF0ZUF2YXRhck1vZGFsLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG59KTtcclxuXHJcbmNvbnN0YW50cy5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBjYXJkTW9kYWwub3BlbigpO1xyXG4gIHZhbGlkYXRlQWRkTW9kYWwudG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbn0pO1xyXG5jb25zdCB2YWxpZGF0ZUVkaXRNb2RhbCA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbnN0YW50cy5jb25maWcsXHJcbiAgY29uc3RhbnRzLnByb2ZpbGVNb2RhbFxyXG4pO1xyXG52YWxpZGF0ZUVkaXRNb2RhbC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCB2YWxpZGF0ZUFkZE1vZGFsID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uc3RhbnRzLmNvbmZpZyxcclxuICBjb25zdGFudHMuY2FyZE1vZGFsXHJcbik7XHJcbnZhbGlkYXRlQWRkTW9kYWwuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCIvLyBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBUEkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9vcHRpb25zLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3VibWl0VXNlckluZm8oZGF0YSkge1xyXG4gICAgZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XHJcbiAgICBmZXRjaChgJHt0aGlzLl9vcHRpb25zLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlUGljdHVyZShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNlbmRDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9vcHRpb25zLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElELCBjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSUQsIGNhcmQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9vcHRpb25zLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmQpLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJRCwgY2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZCksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBpbWFnZSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cCB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gaW1hZ2U7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIGNvbnN0IG1vZGFsSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBtb2RhbEltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveF9fY2FwdGlvblwiKTtcclxuICAgIGNvbnN0IGNhcmRDYXAgPSBkYXRhLm5hbWU7XHJcbiAgICBjb25zdCBjYXJkSW1nID0gZGF0YS5saW5rO1xyXG4gICAgbW9kYWxJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gY2FyZENhcDtcclxuICAgIG1vZGFsSW1hZ2Uuc3JjID0gY2FyZEltZztcclxuICAgIG1vZGFsSW1hZ2UuYWx0ID0gYFByZXZpZXcgaW1hZ2UgZm9yICR7Y2FyZENhcH1gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dDtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lOyAvKiAoZm9ybWVybHkgbmFtZUlucHV0LnZhbHVlKSAqL1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0OyAvKiAoZm9ybWVybHkgZGVzY0lucHV0LnZhbHVlKSAqL1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsInRlbXBsYXRlIiwidmlld0ltYWdlIiwiaGFuZGxlRGVsZXRlIiwic2VuZExpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX3RlbXBsYXRlIiwiX3ZpZXdJbWFnZSIsIl9oYW5kbGVEZWxldGUiLCJfc2VuZExpa2UiLCJfdG9nZ2xlTGlrZSIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfcmVtb3ZlQ2FyZCIsInJlbW92ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmRMaWtlIiwiZGVsZXRlQnV0dG9uIiwiY2FyZEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUNhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZSIsImNhcmRDYXAiLCJjYXJkSW1nIiwiY2FyZElEIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJpZCIsImFkZCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJldnQiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1TdWJtaXQiLCJzdWJtaXRCdXR0b24iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRzT2JqZWN0IiwiZm9yRWFjaCIsInZhbHVlIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2hpZGVFcnJvciIsImlucHV0IiwiZXJyb3JUZXh0IiwiZXJyb3IiLCJpbnB1dEVycm9yIiwiX3Nob3dFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RvZ2dsZUlucHV0RXJyb3JzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9kaXNhYmxlU3VibWl0IiwiYnV0dG9uIiwic2V0QXR0cmlidXRlIiwiaW5hY3RpdmVCdXR0b24iLCJfZW5hYmxlU3VibWl0IiwicmVtb3ZlQXR0cmlidXRlIiwiX2NoZWNrRm9ySW52YWxpZElucHV0Iiwic29tZSIsInRvZ2dsZVN1Ym1pdEJ1dHRvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJTZWN0aW9uIiwiY2FyZEJpbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJwcm9maWxlTW9kYWwiLCJjYXJkTW9kYWwiLCJjYXJkTW9kYWxDbG9zZSIsImNsb3Nlc3QiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjIiwiY2FyZExpc3QiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicG9wdXBXaXRoSW1hZ2UiLCJwb3B1cEltYWdlIiwibmFtZUlucHV0IiwiZGVzY0lucHV0IiwiYXZhdGFyIiwiY2hhbmdlQXZhdGFyIiwiY2hhbmdlQXZhdGFyQnV0dG9uIiwiZGVsZXRlUG9wdXAiLCJkZWxldGVJRCIsImVkaXRNb2RhbCIsImFkZE1vZGFsIiwiZGVzY3JpcHRpb24iLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJhcGkiLCJvcHRpb25zIiwiX29wdGlvbnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJzdWJtaXRVc2VySW5mbyIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVVzZXJJbmZvIiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJzZW5kQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkIiwibGlrZUNhcmQiLCJyZW1vdmVMaWtlIiwiY29uc3RhbnRzIiwiY2FyZFJlbmRlcmVyIiwiY2FyZEFycmF5IiwicmVzdWx0IiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImltYWdlIiwiX2ltYWdlIiwibW9kYWxJbWFnZSIsIm1vZGFsSW1hZ2VUaXRsZSIsIm9wZW5Qb3B1cEltYWdlIiwiY2F0Y2giLCJhbGVydCIsIm9wZW5EZWxldGVQb3B1cCIsImFib3V0IiwiX25hbWUiLCJfYWJvdXQiLCJhdmF0YXJNb2RhbCIsInByb2ZpbGVJbmZvIiwidmFsaWRhdGVFZGl0TW9kYWwiLCJ2YWxpZGF0ZUF2YXRhck1vZGFsIiwidmFsaWRhdGVBZGRNb2RhbCJdLCJzb3VyY2VSb290IjoiIn0=